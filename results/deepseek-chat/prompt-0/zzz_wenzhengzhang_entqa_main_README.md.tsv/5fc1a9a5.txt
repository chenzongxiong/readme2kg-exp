```markdown
usp=sharing) and put it under /raw_aida/ for remapping outdated entities of <DATASET>AIDA</DATASET> datasets to <DATASET>KILT</DATASET> wikipedia entity titles \ 5. preprocess <DATASET>AIDA</DATASET> data and <DATASET>KILT</DATASET> kb by ``` <PROGLANG>python</PROGLANG> preprocess_data.py \ --raw_dir /raw_aida/  --out_aida_dir /retriever_input/  \ --raw_kb_path /raw_kb/[<DATASET>kilt wikipedia</DATASET> file name] --out_kb_path /kb/entities_kilt.json \ --max_ent_len 128  --instance_length 32 --stride 16 --pos_prop 1 --title_map_dir /raw_aida/  ```  ## Train Retriever   Train retriever by  ``` <PROGLANG>python</PROGLANG> run_retriever.py \ --model /model_retriever/retriever.pt  --data_dir /retriever_input/   --kb_dir /kb/ \ --k 100 --num_cands 64  --pretrained_path /<SOFTWARE>blink</SOFTWARE>/<SOFTWARE>BLINK</SOFTWARE>/models/ --gpus 0,1,2,3  --max_len 42   \ --mention_bsz 4096 --entity_bsz 2048  --epochs 4  --B 4  --lr 2e-6  --rands_ratio 0.9   \ --logging_step 100 --warmup_proportion 0.2  --out_dir /reader_input/    --gradient_accumulation_steps 2  --type_loss sum_log_nce   \ --cands_embeds_path /candidates_embeds/candidate_embeds.npy \ --<SOFTWARE>blink</SOFTWARE>  --add_topic ``` It takes 10 hours on 4 A100 GPUs to finish the retriever training experiments.
```